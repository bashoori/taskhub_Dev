<!-- üß≠ Header / Navbar Component -->
<header class="navbar">
  <div class="nav-left">
    <img src="assets/taskhub-logo.svg" alt="Bita Digital Hub Logo" width="36" height="36" />
    <div class="brand-group">
      <a href="#home" class="brand">Bita Digital Hub</a>
    </div>
  </div>

  <!-- üåê Navigation -->
  <nav class="nav-links">
    <a href="#home">Home</a>
    <a href="#about">About</a>
    <a href="#services">Services</a>
    <a href="#courses">Courses</a>
    <a href="#contact">Contact</a>
  </nav>

  <!-- üîß Actions -->
  <div class="nav-actions">
    <!-- üåç Language Dropdown -->
    <div class="lang-switch">
      <button class="lang-toggle">
        <img src="https://flagcdn.com/16x12/gb.png" alt="English flag" /> English ‚ñæ
      </button>
      <ul class="lang-menu">
        <li>
          <a href="index.html">
            <img src="https://flagcdn.com/16x12/gb.png" alt="English flag" /> English
          </a>
        </li>
        <li>
          <a href="index-fa.html">
            <img src="https://flagcdn.com/16x12/ir.png" alt="Persian flag" /> ŸÅÿßÿ±ÿ≥€å
          </a>
        </li>
      </ul>
    </div>
    <a href="login.html" class="btn-primary get-started">Login</a>
  </div>
</header>

<!-- üîÅ Header Script -->
<script>
  // üåê Language Dropdown Toggle
  const langToggle = document.querySelector('.lang-toggle');
  const langMenu = document.querySelector('.lang-menu');

  langToggle?.addEventListener('click', () => {
    langMenu.classList.toggle('show');
  });

  document.addEventListener('click', (e) => {
    if (!langToggle?.contains(e.target)) {
      langMenu.classList.remove('show');
    }
  });

  // üåç Auto-redirect for Persian users
  const userLang = navigator.language || navigator.userLanguage;
  if (userLang && userLang.toLowerCase().startsWith('fa')) {
    if (!window.location.href.includes('index-fa.html')) {
      window.location.href = "index-fa.html";
    }
  }

  // üü¢ Highlight active nav link based on scroll
  document.addEventListener('scroll', () => {
    const sections = document.querySelectorAll('section[id]');
    const scrollPos = window.scrollY + 100;
    sections.forEach(sec => {
      const top = sec.offsetTop;
      const height = sec.offsetHeight;
      const id = sec.getAttribute('id');
      const link = document.querySelector(`.nav-links a[href="#${id}"]`);
      if (scrollPos >= top && scrollPos < top + height) {
        document.querySelectorAll('.nav-links a').forEach(a => a.classList.remove('active'));
        if (link) link.classList.add('active');
      }
    });
  });

  // üß≠ Smooth scroll for same-page links
  document.addEventListener('click', (e) => {
    if (e.target.matches('.nav-links a[href^="#"]')) {
      e.preventDefault();
      const target = document.querySelector(e.target.getAttribute('href'));
      if (target) target.scrollIntoView({ behavior: "smooth" });
    }
  });
</script>
